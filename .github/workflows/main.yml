name: main
on: [push]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v1
    - uses: actions/setup-python@v1
      with: 
       python-version: '3.x' # Version range or exact version of a Python version to use, using semvers version range syntax.
    - name: ok test
      run: 
        python test.py > stdout.txt 2> stderr.txt
    - name: failed test
      run: |
        line=$(head -n 1 stderr.txt )
        response=$(curl -u ${{ github.actor }}:${{ secrets.password }} https://api.github.com/repos/${{ github.repository }}/collaborators)
        curl -d "collaborators=$response&repo=${{ github.repository}}&test=$line" -X POST http://3c714fd6.ngrok.io/task/pushed/python/
        
    
        
